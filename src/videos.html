<!-- Video Script -->
<script type="module">
  // Load videos from JSON
  async function loadVideos() {
    try {
      const response = await fetch('/data/gallery.json');
      const data = await response.json();
      const videos = data.videos || [];
      
      const grid = document.getElementById('videos-grid');

      if (videos.length === 0) {
        grid.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-dim);">
            <p>No videos available yet.</p>
            <p style="margin-top: 1rem;">Add videos to <code>/src/assets/videos/clips/</code></p>
          </div>
        `;
        return;
      }

      grid.innerHTML = videos.map(video => `
        <div class="card">
          <div class="video-wrapper">
            <video 
              controls 
              preload="metadata"
              poster="${video.poster}"
            >
              <source src="${video.src}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
          <div class="card-content">
            <h3 class="card-title">${video.title}</h3>
            <p style="color: var(--text-dim); font-size: 0.95rem; margin-bottom: 0.5rem;">
              ${video.description}
            </p>
            <div class="card-meta">
              <span class="tag">‚è± ${video.duration}</span>
              ${video.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
            </div>
          </div>
        </div>
      `).join('');
    } catch (error) {
      console.error('Failed to load videos:', error);
      document.getElementById('videos-grid').innerHTML = 
        '<p style="color: var(--text-dim);">Failed to load videos</p>';
    }
  }

  loadVideos();
</script>